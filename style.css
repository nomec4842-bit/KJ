:root { --bg:#0b0c0f; --fg:#e7e7ea; --muted:#9aa0a6; --accent:#5ac8fa; --border:#2a2d33; }
* { box-sizing: border-box; }
body { margin:0; font:14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background:var(--bg); color:var(--fg); }
header { display:flex; gap:10px; align-items:center; padding:12px; border-bottom:1px solid var(--border); position:sticky; top:0; background:rgba(11,12,15,.9); backdrop-filter:blur(6px); }
main { display:grid; grid-template-columns: 1fr 320px; gap:12px; padding:12px; }
.panel { background:#111319; border:1px solid var(--border); border-radius:12px; padding:12px; }
h3 { margin:0 0 8px; font-weight:600; }
.ctrl { display:flex; align-items:center; gap:6px; color:var(--muted); }
.primary, .ghost, button { background:#191b22; color:var(--fg); border:1px solid var(--border); border-radius:10px; padding:6px 10px; cursor:pointer; }
.primary { background:#1e2633; border-color:#2d3644; }
.toggle.active { background:#243145; border-color:#35506e; }
.hint { color:var(--muted); }
.field { margin:10px 0; }
.field label { display:block; font-size:12px; color:var(--muted); margin-bottom:4px; }
.field .inline { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }

.sampler-advanced {
  display:none;
  margin:8px 0 0;
  padding:10px;
  border:1px dashed var(--border);
  border-radius:10px;
  background:#14171f;
}

.sampler-advanced.visible {
  display:block;
}

.advSampler {
  display:flex;
  flex-direction:column;
  gap:12px;
}

.advSampler__canvasWrap {
  position:relative;
  width:100%;
  border:1px solid var(--border);
  border-radius:12px;
  overflow:hidden;
  background:#10131a;
}

.advSampler__canvas {
  width:100%;
  height:140px;
  display:block;
}

.advSampler__overlay {
  position:absolute;
  inset:0;
  pointer-events:none;
}

.advSampler__region {
  position:absolute;
  top:0;
  bottom:0;
  background:rgba(90,200,250,0.18);
}

.advSampler__handle {
  position:absolute;
  top:0;
  bottom:0;
  width:10px;
  margin-left:-5px;
  background:rgba(90,200,250,0.4);
  pointer-events:auto;
  cursor:ew-resize;
}

.advSampler__handle::after {
  content:'';
  position:absolute;
  top:0;
  bottom:0;
  left:50%;
  width:2px;
  background:var(--accent);
  opacity:0.7;
  transform:translateX(-50%);
}

.advSampler__markers {
  position:absolute;
  inset:0;
  pointer-events:none;
}

.advSampler__marker {
  position:absolute;
  top:0;
  bottom:0;
  width:4px;
  margin-left:-2px;
  background:rgba(255,255,255,0.45);
  pointer-events:auto;
  cursor:ew-resize;
}

.advSampler__marker.is-locked {
  background:rgba(255,255,255,0.18);
  cursor:default;
  pointer-events:none;
}

.advSampler__marker.is-selected {
  background:var(--accent);
}

.advSampler__hint {
  font-size:12px;
}

.advSampler__row {
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}

.advSampler__row--markers {
  justify-content:space-between;
}

.advSampler__label {
  font-size:12px;
  color:var(--muted);
  min-width:120px;
}

.advSampler__select,
.advSampler__number,
.advSampler__range {
  min-width:120px;
  flex:1;
}

.advSampler__select {
  padding:4px 8px;
  border-radius:8px;
  border:1px solid var(--border);
  background:#14171f;
  color:var(--fg);
}

.advSampler__number {
  padding:4px 8px;
  border-radius:8px;
  border:1px solid var(--border);
  background:#14171f;
  color:var(--fg);
}

.advSampler__range {
  accent-color:var(--accent);
}

.advSampler__stretchHint {
  font-size:12px;
  color:var(--muted);
  flex-basis:100%;
}

.advSampler__markerList {
  display:flex;
  flex-direction:column;
  gap:8px;
}

.advSampler__markerRow {
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  align-items:center;
  padding:6px 8px;
  background:#151922;
  border:1px solid var(--border);
  border-radius:10px;
}

.advSampler__markerName {
  flex:1;
  font-size:12px;
  color:var(--muted);
}

.advSampler__add {
  display:flex;
  gap:6px;
  align-items:center;
}

.mod-rack { margin:12px 0; display:flex; flex-direction:column; gap:10px; }
.mod-row { display:flex; flex-wrap:wrap; gap:12px; align-items:flex-end; padding:10px; background:#14171f; border:1px solid var(--border); border-radius:10px; }
.mod-cell { display:flex; flex-direction:column; gap:4px; min-width:120px; }
.mod-cell span { font-size:12px; color:var(--muted); }
.mod-row input, .mod-row select { min-width:110px; }
.mod-row button { align-self:center; }
.mod-actions { display:flex; gap:8px; flex-wrap:wrap; }
.mod-empty { color:var(--muted); font-size:12px; padding:2px 0; }

#sequencer { display:grid; grid-template-columns: repeat(16, minmax(22px,1fr)); gap:6px; }
.cell { position:relative; height:28px; background:#171a21; border:1px solid var(--border); border-radius:8px; }
.cell.on { background:#1d293c; }
.cell.playhead { outline:2px solid var(--accent); }
.vel { position:absolute; bottom:0; left:0; width:100%; background:#4aa3ff66; border-bottom-left-radius:8px; border-bottom-right-radius:8px; }

#chainView .toggle .rep{
  display:inline-block; padding:1px 6px; border:1px solid var(--border);
  border-radius:999px; font-weight:600; transform: translateY(-1px); font-size:12px; opacity:.85;
}
